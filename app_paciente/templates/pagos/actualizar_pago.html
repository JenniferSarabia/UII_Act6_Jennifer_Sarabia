{% extends 'base.html' %}
{% block content %}
<h2 class="mb-4">Actualizar Pago</h2>

<form method="post" action="{% url 'realizar_actualizacion_pago' pago.id %}">
    {% csrf_token %}
    <div class="mb-3">
        <label class="form-label">Fecha de Pago</label>
        <input type="date" name="fecha_pago" value="{{ pago.fecha_pago|date:'Y-m-d' }}" class="form-control" required>
    </div>

    <div class="mb-3">
        <label class="form-label">Monto</label>
        <input type="number" step="0.01" name="monto" value="{{ pago.monto }}" class="form-control" required>
    </div>

    <div class="mb-3">
        <label class="form-label">MÃ©todo de Pago</label>
        <select name="metodo_pago" class="form-select">
            <option value="efectivo" {% if pago.metodo_pago == 'efectivo' %}selected{% endif %}>Efectivo</option>
            <option value="tarjeta" {% if pago.metodo_pago == 'tarjeta' %}selected{% endif %}>Tarjeta</option>
            <option value="transferencia" {% if pago.metodo_pago == 'transferencia' %}selected{% endif %}>Transferencia</option>
        </select>
    </div>

    <div class="mb-3">
        <label class="form-label">Estado</label>
        <select name="estado" class="form-select">
            <option value="pendiente" {% if pago.estado == 'pendiente' %}selected{% endif %}>Pendiente</option>
            <option value="pagado" {% if pago.estado == 'pagado' %}selected{% endif %}>Pagado</option>
            <option value="cancelado" {% if pago.estado == 'cancelado' %}selected{% endif %}>Cancelado</option>
        </select>
    </div>

    <div class="mb-3">
        <label class="form-label">Cita</label>
        <select name="cita" class="form-select">
            {% for c in citas %}
            <option value="{{ c.id }}" {% if pago.cita.id == c.id %}selected{% endif %}>
              {{ c.paciente.nom_pac }} - {{ c.fecha }} {{ c.hora }}
            </option>
            {% endfor %}
        </select>
    </div>

    <button type="submit" class="btn btn-primary">Guardar Cambios</button>
    <a href="{% url 'ver_pagos' %}" class="btn btn-secondary ms-2">Cancelar</a>
</form>
{% endblock %}
